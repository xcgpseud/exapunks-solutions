LINK 800
REPL RECEIVE

; INFINITE LOOP
MARK SEND
COPY #NERV M
JUMP SEND

MARK RECEIVE
@REP 4
LINK 1
@END

MARK REC_L
COPY M X

; IF OVER 50, SEND 50
TEST X > 50
TJMP CLAMP_HI

; IF UNDER -120, SEND
; -120
TEST X < -120
TJMP CLAMP_LO

; ELSE SEND X
COPY X #NERV
JUMP REC_L

MARK CLAMP_HI
COPY 50 #NERV
JUMP REC_L

MARK CLAMP_LO
COPY -120 #NERV
TJMP REC_L
